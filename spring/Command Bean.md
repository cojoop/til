# Command Bean이란

Command Bean은 Spring MVC에서 주로 양방향 데이터 바인딩을 위해 사용되는 객체입니다. 클라이언트가 전송한 데이터를 서버의 모델에 자동으로 바인딩하며, 반대로 서버에서 클라이언트로 데이터를 전달할 때도 같은 객체를 사용해 바인딩을 처리할 수 있습니다.

## 주요 개념

### 양방향 데이터 바인딩

양방향 바인딩은 클라이언트의 데이터와 서버의 데이터를 서로 자동으로 동기화하여, 데이터가 변경될 때마다 뷰와 데이터가 일치하도록 유지해주는 메커니즘입니다.

### 특징

- **데이터 변경 감지 및 뷰 갱신:** 데이터의 변화를 감지하여 템플릿과 결합하여 화면을 자동으로 갱신합니다.
- **양방향 데이터 흐름:** 클라이언트 입력에 따라 서버의 데이터가 갱신되고, 서버의 데이터가 변경되면 클라이언트 화면에 반영됩니다.
- **일관성 유지:** 데이터와 화면이 항상 일치하도록 보장해주어, 코드의 유지보수가 용이해집니다.

#### 장점

- **코드량 감소:** 데이터와 뷰 간의 동기화 작업이 자동으로 이루어지기 때문에 수동적인 데이터 바인딩 코드가 줄어듭니다.
- **자동 동기화:** 데이터와 뷰가 일치하도록 유지해주어 클라이언트와 서버 간의 데이터 불일치 문제를 최소화할 수 있습니다.

#### 단점

- **성능 저하 가능성:** 양방향 바인딩이 DOM 객체 전체의 렌더링을 유발할 수 있으므로 성능에 부담이 될 수 있습니다.

### Command Bean의 역할과 주요 특징

Command Bean은 Spring MVC에서 HTML 폼 데이터를 객체에 자동으로 바인딩하여 쉽게 다룰 수 있도록 돕는 객체입니다. 일반적으로 `@ModelAttribute`와 함께 사용됩니다.

### 주요 특징

#### 1. 자동 데이터 바인딩

클라이언트가 제출한 폼 데이터가 서버의 모델에 자동으로 바인딩되므로, 별도의 파라미터 매핑 작업이 필요 없습니다.

#### 2. 유효성 검사

Command Bean을 통해 유효성 검사를 추가할 수 있으며, 폼 데이터가 유효하지 않은 경우 Spring MVC가 자동으로 오류 처리를 수행할 수 있습니다. 이를 통해 데이터 유효성을 보장하면서 에러 핸들링을 간소화할 수 있습니다.

#### 3. 유연한 데이터 전달

Command Bean을 사용하면 데이터를 주고받는 과정을 일관성 있게 관리할 수 있으며, MVC 구조에서 모델을 깔끔하게 유지할 수 있습니다. 이는 데이터를 다양한 뷰에 재사용할 때 특히 유리합니다.

### Command Bean의 데이터 흐름

#### 1. 클라이언트에서 서버로 데이터 바인딩

클라이언트가 HTML 폼을 제출하면, Spring MVC는 폼 데이터를 Command Bean에 자동으로 바인딩합니다. 이 과정에서 모델 객체가 생성되고, 클라이언트의 입력값이 Command Bean의 속성에 할당됩니다.

#### 2. 서버에서 클라이언트로 데이터 전달

Command Bean에 저장된 데이터는 서버에서 처리된 후 다시 클라이언트 뷰에 표시될 수 있습니다. 이는 Model 객체를 통해 Command Bean을 뷰에 전달함으로써 이루어집니다.

### 사용 예제

사용자 정보를 입력받는 폼을 처리하는 `UserController` 클래스로, `@ModelAttribute`를 사용해 User 객체를 바인딩하여 데이터가 서버와 클라이언트 간에 쉽게 전달되도록 합니다.

```java
@Controller
public class UserController {

    // 사용자 정보를 입력하는 폼을 표시하는 메서드
    @GetMapping("/userForm")
    public String showForm(Model model) {
        model.addAttribute("user", new User()); // 새로운 User 객체를 모델에 추가
        return "userForm"; // userForm 뷰를 반환
    }

    // 폼 제출 후 데이터를 처리하는 메서드
    @PostMapping("/submitForm")
    public String submitForm(@ModelAttribute("user") User user) {
        // 클라이언트의 폼 데이터가 자동으로 User 객체에 바인딩됩니다.
        System.out.println(user.getName()); // 예시: 사용자의 이름 출력
        return "result"; // 처리 결과를 보여주는 result 뷰 반환
    }
}
```

- **@ModelAttribute("user"):** 클라이언트에서 전송된 user 데이터를 User 객체에 자동으로 바인딩합니다.
- **showForm 메서드:** 사용자가 폼을 입력할 때 기본 폼을 표시합니다. new User() 객체를 model에 추가하여 뷰에서 사용할 수 있도록 준비합니다.
- **submitForm 메서드:** 폼이 제출되면 `@ModelAttribute`를 통해 User 객체에 클라이언트의 데이터를 자동으로 바인딩하여 사용할 수 있습니다.
