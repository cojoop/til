# @scope와 싱글톤과 프로토타입 차이

`@Scope`, 싱글톤, 그리고 프로토타입은 스프링 프레임워크에서 빈(Bean)의 생성 및 관리 방식에 대한 설정입니다.

### @Scope 애노테이션

스프링에서 빈의 스코프를 정의하는 애노테이션으로, 빈의 범위와 생애 주기를 설정합니다. 대표적으로 사용하는 스코프는 `singleton, prototype, request, session` 등이 있습니다.

### 싱글톤(Singleton)

- `@Scope` 어노테이션을 생략하면 싱글톤으로 지정됩니다.
- 스프링 컨테이너의 시작부터 종료까지 유지되는 가장 넓은 범위의 스코프입니다.
- 같은 빈을 요청할 때마다 항상 같은 객체 인스턴스가 반환됩니다.
- 스프링 컨테이너가 빈의 생성부터 소멸까지 전체 생명주기를 관리합니다.

#### 사용 예시

일반적으로 공통 로직을 수행하는 빈에 사용됩니다.

```java
@Service
@Scope("singleton") // 기본값이라 생략 가능
public class MySingletonService { }
```

### 프로토타입(Prototype)

- `@Scope("prototype")`으로 지정합니다.
- 빈을 요청할 때마다 새로운 객체 인스턴스가 생성되어 반환됩니다.
- 스프링 컨테이너는 빈의 생성과 의존성 주입까지만 관여하고 이후 관리하지 않습니다.
- `@PreDestroy` 같은 소멸 메서드가 호출되지 않습니다.

#### 사용 예시

상태를 유지해야 하는 빈에 주로 사용됩니다.

```java
@Service
@Scope("prototype")
public class MyPrototypeService { }
```

#### 주요 차이점

1. 인스턴스 생성: 싱글톤은 한 번만 생성되고 공유되지만, 프로토타입은 요청마다 새로 생성됩니다.
2. 생명주기 관리: 싱글톤은 컨테이너가 전체 생명주기를 관리하지만, 프로토타입은 생성 이후 관리하지 않습니다.
3. 상태 공유: 싱글톤은 상태를 공유할 수 있어 주의가 필요하고, 프로토타입은 독립적인 상태를 가집니다.
4. 성능: 싱글톤이 일반적으로 더 효율적이지만, 프로토타입은 매번
새로운 인스턴스가 필요한 경우에 유용합니다.
5. 사용 사례: 싱글톤은 상태가 없는 공유 서비스에 적합하고, 프로토타입은 상태를 가진 빈이 필요한 경우에 사용됩니다.

싱글톤 빈이 프로토타입 빈을 참조할 때 발생할 수 있는 문제를 해결하기 위해 프록시 모드를 사용할 수 있습니다.
