# 각 계층에서의 DTO와 VO 사용방식

DTO(`Data Transfer Object`)와 VO(`Value Object`)는 소프트웨어 아키텍처에서 데이터 전달과 도메인 모델링을 효율적으로 관리하기 위해 사용되는 중요한 개념입니다.
각 계층에서 DTO와 VO를 적절히 활용함으로써 코드의 유지보수성과 확장성을 높일 수 있습니다.

## DTO와 VO의 개념

#### DTO (Data Transfer Object)

- **목적:** 계층 간 데이터 전송을 단순화하고, 불필요한 데이터를 제외하여 네트워크 효율성을 높입니다.
- **특징:** 주로 데이터 전달용으로 사용되며, 로직을 포함하지 않습니다.
- **사용 예:** 프레젠테이션 계층에서 서비스 계층으로, 또는 서비스 계층에서 데이터 접근 계층으로 데이터를 전송할 때 사용됩니다.

#### VO (Value Object)

- **목적:** 도메인 모델 내에서 불변성을 유지하며, 특정 값의 의미를 캡슐화합니다.
- **특징:** 불변 객체로, 동일한 값을 가지면 동일한 객체로 간주됩니다. 도메인 로직을 포함할 수 있습니다.
- **사용 예:** 도메인 모델에서 특정 개념을 표현할 때 사용됩니다. 예를 들어, 주소, 금액, 날짜 등.

## 계층별 사용 방식

- 프레젠테이션 계층: 사용자와의 상호작용을 담당.
- 애플리케이션 서비스 계층: 비즈니스 로직을 조정하고, DTO와 도메인 객체 간의 변환을 담당.
- 도메인 계층: 핵심 비즈니스 로직과 도메인 모델을 관리.
- 인프라스트럭처 계층: 데이터베이스 접근, 외부 시스템과의 통신 등을 처리.

### 1. 프레젠테이션 계층 (Presentation Layer)

- **사용 객체:** DTO
- **역할:** 클라이언트와의 데이터 교환을 담당합니다. 예를 들어, 웹 API의 요청과 응답에서 DTO를 사용하여 데이터를 주고받습니다.
- **변환 위치:** 컨트롤러나 핸들러에서 DTO를 사용하고, 이를 애플리케이션 서비스 계층의 내부 객체로 변환합니다.

### 2. 애플리케이션 서비스 계층 (Application Service Layer)

- **사용 객체:** DTO, VO
- **역할:** 비즈니스 로직을 수행하며, 도메인 계층과 인프라스트럭처 계층 간의 조정을 담당합니다.
- **변환 위치:** 프레젠테이션 계층에서 받은 DTO를 도메인 계층에서 사용할 VO나 엔티티로 변환합니다. 반대로 도메인 계층에서 처리된 결과를 DTO로 변환하여 프레젠테이션 계층으로 전달합니다.

### 3. 도메인 계층 (Domain Layer)

- **사용 객체:** VO, 엔티티
- **역할:** 핵심 비즈니스 로직과 도메인 모델을 포함합니다.
- **변환 위치:** 애플리케이션 서비스 계층에서 전달받은 DTO를 도메인 객체(VO나 엔티티)로 변환하여 사용합니다. 도메인 로직을 처리한 후 결과를 다시 DTO로 변환할 필요가 있으면 애플리케이션 서비스 계층으로 전달합니다.

### 4. 인프라스트럭처 계층 (Infrastructure Layer)

- **사용 객체:** VO, 엔티티, DTO (경우에 따라)
- **역할:** 데이터베이스 접근, 외부 시스템과의 통신 등을 담당합니다. JDBC를 사용하는 경우, VO나 엔티티를 데이터베이스 테이블과 매핑하여 데이터베이스와 상호작용합니다.
- **변환 위치:** 도메인 계층에서 전달받은 VO나 엔티티를 JDBC나 ORM 프레임워크가 이해할 수 있는 형태로 변환하여 데이터베이스와 통신합니다. 데이터베이스에서 조회한 데이터를 다시 VO나 DTO로 변환하여 도메인 계층으로 전달합니다.

## DTO와 VO 변환 시점 및 위치

### 변환 시점

- **DTO ↔ VO/엔티티:** 주로 애플리케이션 서비스 계층에서 변환이 이루어집니다. 프레젠테이션 계층과 도메인 계층 사이에서 데이터 형식을 변환하는 역할을 합니다.

### 변환 위치

- **프레젠테이션 계층:** 컨트롤러에서 DTO를 수신하고, 이를 서비스 계층에 전달하기 전에 VO나 내부 도메인 객체로 변환.
- **애플리케이션 서비스 계층:** 서비스 메서드 내에서 DTO와 도메인 객체 간의 변환을 수행.
- **인프라스트럭처 계층:** 데이터베이스와의 상호작용 시 VO나 엔티티를 JDBC가 이해할 수 있는 형태로 변환하고, 반대로 데이터베이스에서 조회한 데이터를 VO나 엔티티로 변환.
