# Django 프로젝트 구조와 파일 구조

`Django`는 웹 애플리케이션의 여러 부분을 배열하기 위해 디렉토리 구조를 사용합니다. 이를 위해 프로젝트와 앱 폴더를 만듭니다.

`Django` 프로젝트를 만들 때, `Django` 자체는 프로젝트의 루트 디렉터리를 만드는데, 여기에는 웹 애플리케이션에 기본적인 기능을 제공하는 데 필요한 파일이 포함되어 있습니다.

### manage.py

`Django` 프로젝트와 상호작용하는 명령줄 유틸리티입니다. 이 파일을 사용하여 데이터베이스 마이그레이션, 앱 생성, 서버 실행 등을 할 수 있습니다. 여기에는 일반적으로 사용되는 주요 명령어 몇 가지가 있습니다:

> 장고 관리자와 동일한 작업을 수행하지만 프로젝트별 기능도 제공합니다.

##### 주요 명령어

- **startapp:** 새로운 `Django` 앱을 생성합니다.
`python manage.py startapp <앱이름>`

- **makemigrations:** 데이터베이스의 변경 사항을 추적하는 마이그레이션 파일을 생성합니다.
`python manage.py makemigrations`

- **migrate:** 마이그레이션 파일을 데이터베이스에 적용하여 스키마를 업데이트합니다.
`python manage.py migrate`

- **runserver:** 내장된 개발 서버를 실행합니다.
`python manage.py runserver`

- **createsuperuser:** 관리자 계정을 생성합니다.
`python manage.py createsuperuser`

## Project files

`Project`는 `django-admin start project(project_name)`를 입력하면서 프로젝트에 부여한 이름입니다. 프로젝트의 구성 파일이 포함되어 있습니다.

### init.py

프로젝트 폴더 내에 있는 `__init__.py` 파일은 해당 폴더를 파이썬 패키지로 간주하도록 하는 역할을 합니다. 이 파일은 `Python`의 모든 패키지 폴더 내에 존재할 수 있습니다.

`__init__.py` 파일은 보통 비어있거나, 패키지의 초기화 코드를 담고 있을 수 있습니다. 패키지를 초기화하는 코드를 포함할 경우, 이 코드는 패키지가 임포트되는 순간 실행됩니다.

> 대부분의 경우, `Django` 프로젝트에서는 **init**.py 파일에 특별한 코드를 작성할 필요가 없습니다. 보통 이 파일은 비어있는 상태로 남겨두고 Django의 다른 구성 요소들이 정상적으로 작동할 수 있도록 합니다. 하지만 경우에 따라서는 특정한 초기화 작업이 필요할 때가 있을 수 있습니다.

### settings.py

`settings.py` 파일은 `Django` 프로젝트의 설정을 담당하는 중요한 파일입니다. 이 파일은 다양한 설정 옵션들을 설정하여 `Django` 애플리케이션의 동작을 제어합니다. 여기에는 일반적으로 설정되는 몇 가지 중요한 옵션들이 있습니다.

- **DEBUG:** 디버그 모드 설정입니다. 개발 중에는 True로 설정하고, 배포할 때는 False로 변경합니다.

- **ALLOWED_HOSTS:** 서버가 요청을 받아들일 호스트 이름을 설정합니다. 보안상의 이유로 모든 호스트에 대해 '*'를 사용하는 것은 권장되지 않으며, 특정 도메인 또는 IP 주소만 허용하는 것이 좋습니다.

- **INSTALLED_APPS:** `Django` 프로젝트에 설치된 애플리케이션 목록입니다. 새로운 앱을 추가하려면 해당 앱의 이름을 이곳에 추가해야 합니다.

- **DATABASES:** 데이터베이스 연결 정보를 설정합니다.

- **STATIC_URL 및 STATIC_ROOT:** 정적 파일의 `URL` 및 파일 경로를 설정합니다. `STATIC_URL`은 정적 파일에 접근하기 위한 `URL`을 정의하고, `STATIC_ROOT`는 정적 파일이 수집될 경로를 정의합니다.

- **MEDIA_URL 및 MEDIA_ROOT:** 미디어 파일(사용자가 업로드한 이미지, 동영상 등)에 대한 `URL` 및 파일 경로를 설정합니다.

- **LANGUAGE_CODE 및 TIME_ZONE:** 언어 및 시간대를 설정합니다. 각각 프로젝트에서 사용할 기본 언어와 시간대를 정의합니다.

- **TEMPLATES:** 템플릿 설정을 정의합니다. 템플릿 엔진과 관련된 설정을 포함하여 템플릿 로더, 디렉토리 경로 등을 설정합니다.

- **AUTHENTICATION_BACKENDS:** 사용자 인증 백엔드를 설정합니다. `Django` 기본 제공 백엔드 외에 사용자 지정 백엔드를 추가할 수 있습니다.

- **MIDDLEWARE:** HTTP 요청과 응답을 처리하는 미들웨어 클래스 목록을 설정합니다. 요청 전/후에 실행되는 미들웨어들을 정의하여 애플리케이션의 동작을 수정하거나 보완할 수 있습니다.

### urls.py

`urls.py` 파일은 `Django` 프로젝트의 `URLconf(Uniform Resource Locator configuration)`로, `URL`과 해당하는 뷰를 매핑시키는 역할을 합니다. 즉, 클라이언트의 요청이 어느 뷰로 보내질지 결정합니다.

- **urlpatterns:** `URL` 매핑 패턴의 리스트입니다. 이 패턴들은 `URL`과 해당하는 뷰 또는 다른 `URLconf`로의 매핑을 정의합니다.

- **include() 함수:** 다른 앱의 `URLconf`를 포함하는 데 사용됩니다. 이를 통해 앱별로 `URL`을 분리하여 유지보수 및 관리를 용이하게 할 수 있습니다.

> 기본적으로 `Django`는 각 앱의 `urls.py`를 참조하여 `URL`을 매핑합니다. 그런데 프로젝트의 루트 `URLconf`를 관리하기 위해 프로젝트 폴더의 `urls.py` 파일이 있습니다.
>
### wsgi.py

`wsgi.py` 파일은 `Django` 프로젝트를 `WSGI(Web Server Gateway Interface)` 호환 웹 서버에 연결하기 위한 엔트리 포인트입니다. `WSGI`는 파이썬 웹 애플리케이션과 웹 서버 사이의 표준 인터페이스를 정의하며, `Django` 프로젝트 역시 `WSGI` 호환 웹 서버에서 실행됩니다.

```py
import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', '프로젝트이름.settings')

application = get_wsgi_application()
```

- **DJANGO_SETTINGS_MODULE:** 이 환경 변수는 `Django`가 어떤 설정 파일(`settings.py`)을 사용할지를 지정합니다.

- **프로젝트이름.settings:** 프로젝트의 설정 파일이 위치한 경로를 지정합니다. 실제 프로젝트 이름으로 변경되어야 합니다.

> `wsgi.py` 파일은 일반적으로 프로젝트를 배포할 때 사용됩니다. 개발 시에는 `manage.py runserver` 명령으로 내장 서버를 사용하는 것이 일반적입니다.

### asgi.py

`asgi.py` 파일은 `Django` 프로젝트를 `ASGI(Asynchronous Server Gateway Interface)` 호환 웹 서버에 연결하는 엔트리 포인트입니다. `ASGI`는 비동기 웹 서버와 `Django` 애플리케이션 간의 표준 인터페이스를 제공합니다. 이는 `Django` 애플리케이션이 웹소켓과 같은 비동기 통신을 처리하는 데 사용됩니다.

```py
import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', '프로젝트이름.settings')

application = get_asgi_application()
```

`wsgi.py`와 유사하게, `asgi.py` 파일도 `DJANGO_SETTINGS_MODULE` 환경 변수를 설정하고 `Django` 애플리케이션을 가져옵니다. 이 파일을 통해 `Django` 애플리케이션은 `ASGI` 호환 웹 서버와 통합됩니다.

> `Django 3.0`부터는 `ASGI`가 추가되어 비동기 처리 및 웹소켓과 같은 실시간 기능을 지원하게 되었으며, `asgi.py` 파일은 이러한 기능을 활용하기 위한 필수 요소가 되었습니다. 따라서 `ASGI` 호환 웹 서버에서 `Django` 애플리케이션을 실행하려면 `asgi.py` 파일을 사용해야 합니다.

## Django Application Files

`Django`는 프로젝트와 애플리케이션의 개념을 사용하여 코드를 관리하고 읽을 수 있는 형식으로 그것들을 제시합니다. `Django` 프로젝트에는 하나 이상의 응용 프로그램이 포함되어 있으며 웹 응용 프로그램의 원활한 흐름을 구현하기 위해 작업을 동시에 수행합니다.

### admin.py

`admin.py` 파일은 `Django` 애플리케이션에서 관리자 페이지(`admin site`)에서 모델을 관리하기 위한 설정을 정의하는 곳입니다. `Django`의 관리자 페이지는 데이터베이스의 데이터를 쉽게 관리할 수 있는 강력한 도구입니다. `admin.py` 파일을 사용하여 어떤 모델이 관리자 페이지에 표시되고, 어떤 필드가 편집 가능한지 등을 정의할 수 있습니다.

- **Admin 클래스 정의:** 각 모델에 대한 관리자 설정을 정의하는 `Admin` 클래스를 정의합니다. 이 클래스는 `django.contrib.admin.ModelAdmin` 클래스를 상속받습니다.

- **admin.site.register() 함수 호출:** `Admin` 클래스를 모델에 등록하여 해당 모델이 관리자 페이지에 나타나도록 등록합니다.

> `admin.py` 파일을 통해 관리자 페이지에서 모델을 편집하고 관리할 수 있는 기능들을 정의할 수 있습니다. 이를 통해 관리자 페이지를 사용하여 데이터베이스의 데이터를 쉽게 관리할 수 있습니다.

### apps.py

`apps.py` 파일은 `Django` 애플리케이션의 설정을 정의하는 파일입니다. 이 파일은 애플리케이션의 메타데이터와 애플리케이션 설정을 정의하는 클래스를 포함합니다. 주로 애플리케이션의 이름, 레이블 등과 관련된 설정이 여기에 포함됩니다.

- **AppConfig 클래스 정의:** 애플리케이션의 설정을 정의하는 `AppConfig` 클래스를 정의합니다. 이 클래스는 `django.apps.AppConfig` 클래스를 상속받습니다.

- **애플리케이션 설정:** `AppConfig` 클래스 내에서 애플리케이션의 이름, 레이블, 별칭 등을 설정합니다.

> `apps.py` 파일은 애플리케이션의 메타데이터를 정의하고, 필요에 따라 추가적인 설정을 지정할 때 사용됩니다. 이 파일은 주로 `Django`가 애플리케이션을 식별하고 구성하는 데 사용됩니다.

### models.py

`models.py` 파일은 `Django` 애플리케이션 내에서 데이터 모델을 정의하는 곳입니다. 이 파일은 데이터베이스의 테이블 구조를 정의하고, 데이터베이스의 데이터를 조작하는 `Python` 클래스를 포함합니다.

- **Django 모델 클래스 정의:** 데이터베이스의 각 테이블을 나타내는 모델 클래스를 정의합니다. 이 클래스들은 `django.db.models.Model` 클래스를 상속받습니다.

- **각 모델의 속성(필드) 정의:** 각 모델 클래스에는 데이터베이스 테이블의 열에 해당하는 필드들을 정의합니다.

- **모델 간의 관계 정의:** 데이터베이스 테이블 간의 관계를 정의할 수 있습니다.

- **메서드 정의:** 모델 클래스에는 데이터를 다루는 메서드를 정의할 수 있습니다. 이러한 메서드를 사용하여 데이터베이스의 레코드를 생성, 조회, 수정, 삭제할 수 있습니다.

> `models.py` 파일을 통해 정의된 모델들은 `Django`의 `ORM(Object-Relational Mapping)`을 사용하여 데이터베이스와 상호작용할 수 있습니다.

### test.py

`Django`의 테스트 파일은 보통 `tests.py` 파일에 위치합니다. 이 파일은 `Django` 애플리케이션의 단위 테스트를 정의하는 곳으로, 애플리케이션의 각 기능이 의도한 대로 작동하는지 확인하는데 사용됩니다.

- **테스트 케이스 클래스 정의:** 테스트를 실행하기 위한 테스트 케이스 클래스를 정의합니다. 이 클래스는 `django.test.TestCase` 클래스를 상속받습니다.

- **테스트 메서드 정의:** 각각의 테스트 케이스 클래스 내에서 테스트 메서드를 정의합니다. 이 메서드들은 특정한 기능 또는 동작을 테스트하고, 예상되는 결과를 확인합니다.

> `tests.py` 파일을 통해 `Django` 애플리케이션의 각 기능을 자동화된 방식으로 테스트할 수 있습니다. 이를 통해 애플리케이션의 변경 사항이 예기치 않은 부작용을 일으키지 않도록 보장하고, 코드의 신뢰성을 유지할 수 있습니다.

### urls.py

`urls.py` 파일은 `Django` 애플리케이션의`URLconf(Uniform Resource Locator configuration)`를 정의하는 파일입니다. 이 파일은 `URL`과 해당하는 뷰를 매핑시켜주는 역할을 합니다. 클라이언트의 요청이 어느 뷰로 보내질지 결정합니다.

- **urlpatterns 리스트:** `URL` 패턴과 해당하는 뷰 함수 또는 클래스를 매핑하는 `urlpatterns` 리스트를 정의합니다.

- **path() 또는 re_path() 함수 호출:** `URL` 패턴과 뷰 함수를 매핑하는데 사용됩니다. `path()` 함수는 단순한 경로 기반 매핑에 사용되고, `re_path()` 함수는 정규 표현식을 사용하여 복잡한 `URL` 패턴에 사용됩니다.

> `urls.py` 파일을 통해 `URL` 패턴과 뷰 함수를 매핑함으로써 `Django` 애플리케이션의 동작을 결정할 수 있습니다. 사용자의 요청이 특정한 URL에 따라 어떤 뷰 함수로 전달되는지를 정의하는데 사용됩니다.

### views.py

`views.py` 파일은 `Django` 애플리케이션에서 실제 웹 페이지의 로직을 정의하는 파일입니다. 이 파일에는 `HTTP` 요청을 받아 처리하고, 적절한 응답을 반환하는 뷰 함수들이 정의됩니다. 뷰 함수들은 클라이언트의 요청을 처리하여 템플릿을 렌더링하거나 `JSON` 데이터를 반환하며, 사용자가 보는 웹 페이지의 동작을 결정합니다.

- **뷰 함수 정의:** `HTTP` 요청을 처리하고, 적절한 응답을 반환하는 뷰 함수들을 정의합니다. 각각의 뷰 함수는 `django.http.HttpResponse` 객체나 템플릿을 반환합니다.

- **모델과의 상호작용:** 뷰 함수 내에서 데이터베이스 모델과 상호작용하여 데이터를 가져오거나 변경하는 코드를 작성할 수 있습니다. 이를 통해 클라이언트의 요청에 따라 데이터를 조회하거나 수정할 수 있습니다.

- **템플릿 렌더링:** `HTML` 템플릿을 렌더링하여 클라이언트에게 동적인 웹 페이지를 보여줄 수 있습니다. 뷰 함수는 템플릿을 선택하고 필요한 데이터를 전달하여 템플릿을 렌더링합니다.

> `views.py` 파일은 `Django` 애플리케이션의 핵심 로직을 정의하는 곳으로, 사용자가 보는 웹 페이지의 동작을 결정합니다.
