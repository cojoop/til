# FOR UPDATE 구문

`FOR UPDATE` 구문은 `Oracle` 데이터베이스에서 동시성 제어와 데이터 무결성을 위해 사용되는 중요한 기능입니다.
트랜잭션 내에서 특정 레코드를 선택하고 해당 레코드에 대한 잠금을 설정하기 위해 사용됩니다.

## FOR UPDATE의 정의와 목적

`FOR UPDATE` 구문은 `SELECT` 문과 함께 사용되어 조회된 행에 대해 배타적 잠금(`exclusive lock`)을 설정합니다.

#### 주요 목적

- 데이터 무결성 유지
- 동시성 문제 해결
- 트랜잭션 일관성 보장

### 사용 방법

기본적인 `FOR UPDATE` 구문의 형태

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition
FOR UPDATE;
```

- 이 구문은 `SELECT` 문으로 조회된 행들에 대해 잠금을 설정합니다

### 주요 특징

- **행 수준 잠금:** `FOR UPDATE`는 테이블 전체가 아닌 선택된 행에만 잠금을 설정합니다.
- **배타적 잠금:** 다른 세션에서 해당 행을 수정하거나 삭제하는 것을 방지합니다.
- **트랜잭션 범위:** 잠금은 트랜잭션이 커밋되거나 롤백될 때까지 유지됩니다.

### 주의사항

**1. 성능 영향:** 과도한 사용은 데이터베이스 성능에 부정적인 영향을 줄 수 있습니다.
**2. 데드락 가능성:** 여러 트랜잭션이 서로 다른 순서로 리소스를 잠그려 할 때 데드락이 발생할 수 있습니다.
**3. 타임아웃 설정:** 장기간 잠금을 방지하기 위해 적절한 타임아웃을 설정해야 합니다.

#### 활용 사례

- **버스 예매 시스템:** 좌석 중복 예약 방지
- **금융 거래 시스템:** 계좌 잔액 동시 수정 방지
- **재고 관리 시스템:** 재고 수량의 일관성 유지

`FOR UPDATE` 구문은 강력한 도구이지만, 신중하게 사용해야 합니다.
데이터의 일관성과 무결성을 유지하면서도 전체 시스템의 성능과 확장성을 고려해야 합니다.
